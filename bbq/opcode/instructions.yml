
- name: "unknown"
  description: An unknown instruction.

# Local instructions

- name: "getLocal"
  description: Pushes the value of the local at the given index onto the stack.
  operands:
    - name: "localIndex"
      type: "index"

- name: "setLocal"
  description: Sets the value of the local at the given index to the top value on the stack.
  operands:
    - name: "localIndex"
      type: "index"

# Global instructions

- name: "getGlobal"
  description: Pushes the value of the global at the given index onto the stack.
  operands:
    - name: "globalIndex"
      type: "index"

- name: "setGlobal"
  description: Sets the value of the global at the given index to the top value on the stack.
  operands:
    - name: "globalIndex"
      type: "index"

# Field instructions

- name: "getField"
  description: Pushes the value of the field at the given index onto the stack.
  operands:
    - name: "fieldNameIndex"
      type: "index"

- name: "setField"
  description: Sets the value of the field at the given index to the top value on the stack.
  operands:
    - name: "fieldNameIndex"
      type: "index"

# Index instructions

- name: "getIndex"
  description: Pushes the value at the given index onto the stack.

- name: "setIndex"
  description: Sets the value at the given index to the top value on the stack.

# Value instantiation instructions

- name: "true"
  description: Pushes the boolean value `true` onto the stack.

- name: "false"
  description: Pushes the boolean value `false` onto the stack.

- name: "nil"
  description: Pushes the value `nil` onto the stack.

- name: "path"
  description: Pushes the path with the given domain and identifier onto the stack.
  operands:
    - name: "domain"
      type: "pathDomain"
    - name: "identifier"
      type: "string"

- name: "new"
  description: Creates a new instance of the given type.
  operands:
    - name: "kind"
      type: "compositeKind"
    - name: "typeIndex"
      type: "index"

- name: "newArray"
  description: Creates a new array with the given type and size.
  operands:
    - name: "typeIndex"
      type: "index"
    - name: "size"
      type: "size"
    - name: "isResource"
      type: "bool"

- name: "newRef"
  description: Creates a new reference with the given type.
  operands:
    - name: "typeIndex"
      type: "index"

- name: "getConstant"
  description: Pushes the constant at the given index onto the stack.
  operands:
    - name: "constantIndex"
      type: "index"

# Invocation instructions

- name: "invoke"
  description: Invokes the function with the given type arguments.
  operands:
    - name: "typeArgs"
      type: "indices"


- name: "invokeDynamic"
  description: Invokes the dynamic function with the given name, type arguments, and argument count.
  operands:
    - name: "name"
      type: "string"
    - name: "typeArgs"
      type: "indices"
    - name: "argCount"
      type: "size"

# Value stack instructions

- name: "dup"
  description: Duplicates the top value on the stack.

- name: "drop"
  description: Removes the top value from the stack.

# Resource stack instructions

- name: "destroy"
  description: Destroys the top value on the stack.

# Optional instructions

- name: "unwrap"
  description: Unwraps the top value on the stack.

# Conversion instructions

- name: "transfer"
  description: Transfers the top value on the stack.
  operands:
    - name: "typeIndex"
      type: "index"

- name: "cast"
  description: Casts the top value on the stack to the given type.
  operands:
    - name: "typeIndex"
      type: "index"
    - name: "kind"
      type: "castKind"

# Control flow instructions

- name: "jump"
  description: Jumps to the given instruction.
  operands:
    - name: "target"
      type: "index"

- name: "jumpIfFalse"
  description: Jumps to the given instruction, if the top value on the stack is `false`.
  operands:
    - name: "target"
      type: "index"

- name: "return"
  description: Returns from the current function, without a value.

- name: "returnValue"
  description: Returns from the current function, with the top value on the stack.

# Comparison instructions

- name: "equal"
  description: Compares the top two values on the stack for equality.

- name: "notEqual"
  description: Compares the top two values on the stack for inequality.

# Integer arithmetic instructions

- name: "intAdd"
  description: Adds the top two values on the stack.

- name: "intSubtract"
  description: Subtracts the top two values on the stack.

- name: "intMultiply"
  description: Multiplies the top two values on the stack.

- name: "intDivide"
  description: Divides the top two values on the stack.

- name: "intMod"
  description: Calculates the modulo of the top two values on the stack.

# Integer comparison instructions

- name: "intLess"
  description: Compares the top two values on the stack for less than.

- name: "intLessOrEqual"
  description: Compares the top two values on the stack for less than or equal.

- name: "intGreater"
  description: Compares the top two values on the stack for greater than.

- name: "intGreaterOrEqual"
  description: Compares the top two values on the stack for greater than or equal.
